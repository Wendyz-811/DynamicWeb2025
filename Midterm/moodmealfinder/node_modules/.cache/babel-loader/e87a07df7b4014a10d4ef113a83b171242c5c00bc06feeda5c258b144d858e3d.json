{"ast":null,"code":"import { getAccessToken } from './spotifyAuth';\n\n// Map moods to search queries\nconst MOOD_QUERIES = {\n  pop: 'genre:pop',\n  acoustic: 'genre:acoustic',\n  rock: 'genre:rock',\n  ambient: 'chill ambient relaxing',\n  romance: 'love romantic',\n  classical: 'genre:classical'\n};\nexport const getRecommendations = async (genres, limit = 20) => {\n  try {\n    const token = await getAccessToken();\n    const genreArray = Array.isArray(genres) ? genres : [genres];\n    const primaryGenre = genreArray[0];\n\n    // Use search instead of recommendations\n    const query = MOOD_QUERIES[primaryGenre] || primaryGenre;\n    const url = `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=${limit}`;\n    console.log('Searching Spotify:', query);\n    const response = await fetch(url, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('Search failed:', response.status, errorText);\n      return [];\n    }\n    const data = await response.json();\n\n    // Transform search results to match your expected format\n    const tracks = data.tracks.items.map(track => {\n      var _track$artists$, _track$album$images$;\n      return {\n        id: track.id,\n        name: track.name,\n        artist: ((_track$artists$ = track.artists[0]) === null || _track$artists$ === void 0 ? void 0 : _track$artists$.name) || 'Unknown Artist',\n        album: track.album.name,\n        preview_url: track.preview_url,\n        image: ((_track$album$images$ = track.album.images[0]) === null || _track$album$images$ === void 0 ? void 0 : _track$album$images$.url) || '',\n        external_url: track.external_urls.spotify\n      };\n    });\n    console.log(`✓ Found ${tracks.length} tracks`);\n    return tracks;\n  } catch (error) {\n    console.error('Error in getRecommendations:', error);\n    return [];\n  }\n};","map":{"version":3,"names":["getAccessToken","MOOD_QUERIES","pop","acoustic","rock","ambient","romance","classical","getRecommendations","genres","limit","token","genreArray","Array","isArray","primaryGenre","query","url","encodeURIComponent","console","log","response","fetch","headers","ok","errorText","text","error","status","data","json","tracks","items","map","track","_track$artists$","_track$album$images$","id","name","artist","artists","album","preview_url","image","images","external_url","external_urls","spotify","length"],"sources":["/Users/wendyzhan/DynamicWebFolder/DynamicWeb2025/Midterm/musicmoodtracker/src/services/spotify.js"],"sourcesContent":["import {getAccessToken} from './spotifyAuth'\n\n// Map moods to search queries\nconst MOOD_QUERIES = {\n  pop: 'genre:pop',\n  acoustic: 'genre:acoustic',\n  rock: 'genre:rock',\n  ambient: 'chill ambient relaxing',\n  romance: 'love romantic',\n  classical: 'genre:classical'\n}\n\nexport const getRecommendations = async (genres, limit = 20) => {\n  try {\n    const token = await getAccessToken()\n    const genreArray = Array.isArray(genres) ? genres : [genres]\n    const primaryGenre = genreArray[0]\n    \n    // Use search instead of recommendations\n    const query = MOOD_QUERIES[primaryGenre] || primaryGenre\n    const url = `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=${limit}`\n    \n    console.log('Searching Spotify:', query)\n    \n    const response = await fetch(url, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    })\n\n    if (!response.ok) {\n      const errorText = await response.text()\n      console.error('Search failed:', response.status, errorText)\n      return []\n    }\n\n    const data = await response.json()\n    \n    // Transform search results to match your expected format\n    const tracks = data.tracks.items.map(track => ({\n      id: track.id,\n      name: track.name,\n      artist: track.artists[0]?.name || 'Unknown Artist',\n      album: track.album.name,\n      preview_url: track.preview_url,\n      image: track.album.images[0]?.url || '',\n      external_url: track.external_urls.spotify\n    }))\n    \n    console.log(`✓ Found ${tracks.length} tracks`)\n    return tracks\n    \n  } catch (error) {\n    console.error('Error in getRecommendations:', error)\n    return []\n  }\n}"],"mappings":"AAAA,SAAQA,cAAc,QAAO,eAAe;;AAE5C;AACA,MAAMC,YAAY,GAAG;EACnBC,GAAG,EAAE,WAAW;EAChBC,QAAQ,EAAE,gBAAgB;EAC1BC,IAAI,EAAE,YAAY;EAClBC,OAAO,EAAE,wBAAwB;EACjCC,OAAO,EAAE,eAAe;EACxBC,SAAS,EAAE;AACb,CAAC;AAED,OAAO,MAAMC,kBAAkB,GAAG,MAAAA,CAAOC,MAAM,EAAEC,KAAK,GAAG,EAAE,KAAK;EAC9D,IAAI;IACF,MAAMC,KAAK,GAAG,MAAMX,cAAc,CAAC,CAAC;IACpC,MAAMY,UAAU,GAAGC,KAAK,CAACC,OAAO,CAACL,MAAM,CAAC,GAAGA,MAAM,GAAG,CAACA,MAAM,CAAC;IAC5D,MAAMM,YAAY,GAAGH,UAAU,CAAC,CAAC,CAAC;;IAElC;IACA,MAAMI,KAAK,GAAGf,YAAY,CAACc,YAAY,CAAC,IAAIA,YAAY;IACxD,MAAME,GAAG,GAAG,uCAAuCC,kBAAkB,CAACF,KAAK,CAAC,qBAAqBN,KAAK,EAAE;IAExGS,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEJ,KAAK,CAAC;IAExC,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAG,EAAE;MAChCM,OAAO,EAAE;QACP,eAAe,EAAE,UAAUZ,KAAK;MAClC;IACF,CAAC,CAAC;IAEF,IAAI,CAACU,QAAQ,CAACG,EAAE,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MACvCP,OAAO,CAACQ,KAAK,CAAC,gBAAgB,EAAEN,QAAQ,CAACO,MAAM,EAAEH,SAAS,CAAC;MAC3D,OAAO,EAAE;IACX;IAEA,MAAMI,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;;IAElC;IACA,MAAMC,MAAM,GAAGF,IAAI,CAACE,MAAM,CAACC,KAAK,CAACC,GAAG,CAACC,KAAK;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MAAA,OAAK;QAC7CC,EAAE,EAAEH,KAAK,CAACG,EAAE;QACZC,IAAI,EAAEJ,KAAK,CAACI,IAAI;QAChBC,MAAM,EAAE,EAAAJ,eAAA,GAAAD,KAAK,CAACM,OAAO,CAAC,CAAC,CAAC,cAAAL,eAAA,uBAAhBA,eAAA,CAAkBG,IAAI,KAAI,gBAAgB;QAClDG,KAAK,EAAEP,KAAK,CAACO,KAAK,CAACH,IAAI;QACvBI,WAAW,EAAER,KAAK,CAACQ,WAAW;QAC9BC,KAAK,EAAE,EAAAP,oBAAA,GAAAF,KAAK,CAACO,KAAK,CAACG,MAAM,CAAC,CAAC,CAAC,cAAAR,oBAAA,uBAArBA,oBAAA,CAAuBnB,GAAG,KAAI,EAAE;QACvC4B,YAAY,EAAEX,KAAK,CAACY,aAAa,CAACC;MACpC,CAAC;IAAA,CAAC,CAAC;IAEH5B,OAAO,CAACC,GAAG,CAAC,WAAWW,MAAM,CAACiB,MAAM,SAAS,CAAC;IAC9C,OAAOjB,MAAM;EAEf,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACdR,OAAO,CAACQ,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACpD,OAAO,EAAE;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}